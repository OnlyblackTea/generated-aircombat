# 游戏功能详解 - Game Features

## 视觉展示 Visual Representation

### 游戏界面示例
```
Score: 150  Lives: ***--  POWER: P (8s)  (WASD to Move)
----------------------------------------
|                                      |
|       \V/                            |
|         P                            |
|                                      |
|              *#*                     |
|                                      |
|    <W>                               |
|                                      |
|                 |                    |
|         H                            |
|                 |                    |
|                                      |
|              |v|                     |
|                 |                    |
|                                      |
|                                      |
|       *                              |
|                  *                   |
|                         *            |
|                                      |
|                                      |
|              ^                       |
|              A                       |
|             / \                      |
----------------------------------------
```

### 角色说明 Characters

#### 玩家飞机 Player Ship
```
  ^    (鼻锥)
  A    (机身)
 / \   (机翼)
```

#### 敌机类型 Enemy Types

**普通敌机 (Normal Enemy)**
```
\V/   (得分: 10分)
```
- 特点：发射追踪弹(自机狙)
- 移动速度：慢 (0.1)

**直线机 (Straight Shooter)**
```
 |
 v    (得分: 15分)
```
- 特点：快速下降，不发射子弹
- 移动速度：快 (0.3)

**散射机 (Scatter Shooter)**
```
<W>   (得分: 20分)
```
- 特点：发射三发散射弹
- 移动速度：很慢 (0.08)

### 爆炸效果 Explosion Effects

**阶段1 (7-10帧)**
```
*#*
```

**阶段2 (4-6帧)**
```
xXx
```

**阶段3 (1-3帧)**
```
 +
```

### 道具系统 Power-ups

**生命恢复 Health Recovery**
```
H    恢复1条生命（最多5条）
```

**火力升级 Power Upgrade**
```
P    升级火力等级，持续10秒
```

## 火力等级 Fire Power Levels

### 等级 0 - 普通单发
```
     |
     |
```

### 等级 1 - 双发
```
   |   |
   |   |
```

### 等级 2 - 三发
```
  |  |  |
  |  |  |
```

## 难度曲线 Difficulty Curve

| 分数范围 | 敌机分布 | 生成间隔 |
|---------|---------|---------|
| 0-100   | 100% 普通 | 50帧 |
| 100-300 | 70% 普通 + 30% 直线 | 逐渐减少 |
| 300+    | 50% 普通 + 30% 直线 + 20% 散射 | 最低20帧 |

**平衡性改进**：
- 初始生成间隔从30帧提高到50帧，游戏开局更友好
- 最低生成间隔从15帧提高到20帧，避免后期敌机过于密集
- 最大同时在场敌机数量限制为8个（从10个降低）

## 碰撞判定范围 Hitbox Sizes

| 碰撞类型 | 判定范围 | 说明 |
|---------|---------|------|
| 子弹 → 敌机 | 0.8 | 较宽松的判定 |
| 敌弹 → 玩家 | 0.5 | 精确判定，允许擦弹 |
| 敌机 → 玩家 | 0.8 | 中等判定 |
| 道具 → 玩家 | 1.2 | 较宽松，易于拾取 |
| **擦弹判定** | **0.5-1.0** | **触发擦弹奖励区域** |

## 得分系统 Scoring System

**击毁敌机**：
- 普通敌机：10分
- 直线机：15分
- 散射机：20分

**擦弹奖励**：
- 每次擦弹：+5分
- 触发短暂无敌时间（30帧，约0.5秒）
- 擦弹计数显示在游戏界面

## 游戏机制 Game Mechanics

### 玩家移动速度 Player Movement
- 移动速度：0.8（从0.7提升）
- 改善操控性，更容易躲避密集弹幕

### 擦弹系统 Grazing System
- **触发条件**：子弹距离玩家0.5-1.0单位之间
- **奖励效果**：
  - 获得5分奖励
  - 获得30帧无敌时间（约0.5秒）
  - 擦弹计数+1
- **战略意义**：鼓励玩家冒险接近子弹，提供容错机会

### 自动射击 Auto-Fire
- 基础间隔：15帧
- 每50分减少1帧间隔
- 最低间隔：3帧

### 火力升级时长
- 持续时间：10秒（625帧 @ 62.5fps）
- 每次拾取P道具提升1级
- 最高2级
- 超时后恢复普通火力

### 道具掉落机制
- 概率：10%
- 类型：随机（生命/火力各50%）
- 掉落位置：敌机被击毁位置
- 下落速度：0.15

### 敌机生成控制 Enemy Spawn Control
- **最大同时在场数量**：8个（从10个降低）
- **动态生成**：只有在未达到上限时才生成新敌机
- **生成频率**：初始50帧间隔，随分数增长逐渐降至20帧最低间隔

## 实现的优化点

✅ **1. 视觉反馈改进**
- 多字符角色造型
- 动态爆炸效果
- 生命值条可视化
- 火力等级显示
- 擦弹计数显示
- 无敌状态提示

✅ **2. 道具系统**
- 生命恢复机制
- 临时火力升级
- 10%掉落概率

✅ **3. 敌机多样性**
- 3种不同类型敌机
- 不同行为模式
- 渐进式难度曲线

✅ **4. 精确碰撞**
- 优化判定范围
- 实现擦弹机制
- 提升操作精度

✅ **5. 游戏平衡性优化**
- 提升玩家移动速度（0.7→0.8）
- 实现擦弹奖励系统（分数+无敌时间）
- 限制最大敌机数量（10→8）
- 动态敌机生成控制
- 优化难度曲线（更友好的初始难度）

✅ **6. 音效系统**
- 射击音效 - 高音反馈
- 击中音效 - 打击感强化
- 被击中音效 - 伤害警示
- 爆炸音效 - 碰撞反馈

✅ **7. 最高分记录**
- 本地文件持久化存储
- 自动读取和更新
- 新纪录提示
- 长期游玩动力

✅ **8. 精确移动模式**
- Shift/Space 键激活
- 速度降至约 1/3 (0.8→0.25)
- 显示判定点
- 高难度操作支持

## 控制说明 Control Guide

### 基本操作
- **W/A/S/D** - 移动
- **Shift/Space** - 精确移动模式（按住）
- 自动射击（无需按键）

### 精确移动模式
按住 Shift 或 Space 键时：
- 移动速度降低到 0.25（约为正常速度的 1/3）
- 显示判定点 (字符 'o')
- 状态栏显示 [SLOW]
- 适合在密集弹幕中精确躲避

### 擦弹系统
当子弹极度接近但未命中时：
- 获得 5 分奖励
- 获得短暂无敌时间（30帧）
- 擦弹计数增加
- 状态栏显示擦弹数和 [INVINCIBLE] 状态
